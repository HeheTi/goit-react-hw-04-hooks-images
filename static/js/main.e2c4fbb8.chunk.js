(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{14:function(e,t,a){e.exports={loader:"LoaderModal_loader__2n25p"}},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(3),c=a.n(r),s=a(10),i=a(5),u=a(6),l=a(8),h=a(7),m=a(4),d=(a(19),a(13)),p=a.n(d),g=(a(11),a(14)),b=a.n(g),j=a(1),f=document.querySelector("#loader-root"),v=function(){return Object(r.createPortal)(Object(j.jsx)("div",{className:b.a.loader,children:Object(j.jsx)(p.a,{type:"Oval",color:"#3f51b5",height:120,width:120,timeout:0})}),f)},O=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={serchName:""},e.onChangeSerchName=function(t){return e.setState({serchName:t.target.value})},e.onSubmitForm=function(t){t.preventDefault(),e.props.onSubmit(e.state.serchName),e.resetForm()},e.resetForm=function(){return e.setState({serchName:""})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.state.serchName;return Object(j.jsx)("header",{className:"Searchbar",children:Object(j.jsxs)("form",{onSubmit:this.onSubmitForm,className:"SearchForm",children:[Object(j.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(j.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(j.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,onChange:this.onChangeSerchName,placeholder:"Search images and photos",value:e})]})})}}]),a}(n.Component),S=O,k=function(e){var t=e.srcImg,a=e.tags,n=e.onClick;return Object(j.jsx)("li",{onClick:n,className:"ImageGalleryItem",children:Object(j.jsx)("img",{className:"ImageGalleryItem-image",src:t,alt:a})})},y=function(e){var t=e.pictures,a=e.onClickImage;return Object(j.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.webformatURL,n=e.largeImageURL,o=e.tags;return Object(j.jsx)(k,{onClick:function(){return a(n,o)},srcImg:t,tags:o},t)}))})},w=document.querySelector("#modal-root"),x=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onclickBackdrop=function(t){t.target===t.currentTarget&&e.props.onCloseModal()},e.onEscPress=function(t){"Escape"===t.code&&e.props.onCloseModal()},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onEscPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onEscPress)}},{key:"render",value:function(){var e=this.props.data,t=e.bigImg,a=e.tags;return Object(r.createPortal)(Object(j.jsx)("div",{className:"Overlay",onClick:this.onclickBackdrop,children:Object(j.jsx)("div",{className:"modal",children:Object(j.jsx)("img",{src:t,alt:a})})}),w)}}]),a}(n.Component),C=x;var M=function(e){var t=e.onClick;return Object(j.jsx)("button",{onClick:t,className:"Button",children:"Load more"})},N="https://pixabay.com/api/",I="24468918-f1629215ca3337ba51b4044a7";function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="".concat(N,"?q=").concat(e,"&key=").concat(I,"&page=").concat(t,"&image_type=photo&orientation=horizontal&per_page=12");return fetch(a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something went wrong"))}))}var D=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={pictures:[],dataModal:null,serchD:"nature",isLoading:!1,isModalOpen:!1,page:1,isShowBtn:!1},e.perPage=12,e.fetchImages=function(t,a){L(t,a).then((function(n){var o=n.totalHits,r=n.hits,c=Math.ceil(o/e.perPage),i=r.map((function(e){return{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}));if(o<1&&m.b.info("Sorry, no picture about ".concat(t),{autoClose:2500}),o>0&&1===a&&m.b.success("Found picture about ".concat(t||"everithing"),{autoClose:2500}),e.setState((function(e){return{pictures:[].concat(Object(s.a)(e.pictures),Object(s.a)(i))}})),c>1&&e.setState({isShowBtn:!0}),c===e.state.page)return m.b.info("Dont have more picture about ".concat(t),{autoClose:2500,delay:1500}),e.setState({isShowBtn:!1}),!1})).catch((function(e){return m.b.error(e.message,{autoClose:2500})})).finally((function(){return e.setState({isLoading:!1})}))},e.onenModal=function(){return e.setState({isModalOpen:!0})},e.onCloseModal=function(){return e.setState({isModalOpen:!1,dataModal:null})},e.onTakeBigPict=function(t,a){e.setState({dataModal:{bigImg:t,tags:a}}),e.onenModal()},e.onLoadMore=function(){m.b.info("Uploading more pictures about ".concat(e.state.serchD?e.state.serchD:"everything ","  \u2665"),{autoClose:1500}),e.setState((function(e){return{page:e.page+1,isLoading:!0}}))},e.onTakeDataForSerch=function(t){var a=e.state.serchD;return a===t?(m.b.warn("You look picture  about ".concat(a||"everything"," now ;) Search something else!"),{autoClose:3e3}),!1):e.setState({serchD:t,page:1,pictures:[],isShowBtn:!1,isLoading:!0})},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.serchD,a=e.page;this.setState({isLoading:!0}),this.fetchImages(t,a)}},{key:"componentDidUpdate",value:function(e,t){var a=this.state,n=a.serchD,o=a.page;t.page===o&&t.serchD===n||this.fetchImages(n,o)}},{key:"render",value:function(){var e=this.state,t=e.pictures,a=e.isLoading,n=e.isModalOpen,o=e.dataModal,r=e.isShowBtn;return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(S,{onSubmit:this.onTakeDataForSerch}),a&&Object(j.jsx)(v,{}),t.length>0&&Object(j.jsx)(y,{pictures:t,onClickImage:this.onTakeBigPict}),n&&Object(j.jsx)(C,{data:o,onCloseModal:this.onCloseModal}),r&&Object(j.jsx)(M,{onClick:this.onLoadMore}),Object(j.jsx)(m.a,{})]})}}]),a}(n.Component),F=D;a(41);c.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e2c4fbb8.chunk.js.map