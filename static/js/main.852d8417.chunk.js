(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,a){e.exports={loader:"LoaderModal_loader__2n25p"}},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(3),r=a.n(o),s=a(9),i=a(4),u=a(5),l=(a(22),a(11)),b=a.n(l),m=(a(10),a(12)),j=a.n(m),h=a(1),f=document.querySelector("#loader-root"),g=function(){return Object(o.createPortal)(Object(h.jsx)("div",{className:j.a.loader,children:Object(h.jsx)(b.a,{type:"Oval",color:"#3f51b5",height:120,width:120,timeout:0})}),f)},d=a(13),O=a(14),p=a(17),v=a(16),S=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={serchName:""},e.onChangeSerchName=function(t){return e.setState({serchName:t.target.value})},e.onSubmitForm=function(t){t.preventDefault(),e.props.onSubmit(e.state.serchName),e.resetForm()},e.resetForm=function(){return e.setState({serchName:""})},e}return Object(O.a)(a,[{key:"render",value:function(){var e=this.state.serchName;return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{onSubmit:this.onSubmitForm,className:"SearchForm",children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,onChange:this.onChangeSerchName,placeholder:"Search images and photos",value:e})]})})}}]),a}(n.Component),x=S,y=function(e){var t=e.srcImg,a=e.tags,n=e.onClick;return Object(h.jsx)("li",{onClick:n,className:"ImageGalleryItem",children:Object(h.jsx)("img",{className:"ImageGalleryItem-image",src:t,alt:a})})},C=function(e){var t=e.pictures,a=e.onClickImage;return Object(h.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.webformatURL,n=e.largeImageURL,c=e.tags;return Object(h.jsx)(y,{onClick:function(){return a(n,c)},srcImg:t,tags:c},t)}))})},w=a(47),N=document.querySelector("#modal-root"),k=function(e){var t=e.onCloseModal,a=e.data;Object(w.a)(!0),Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return Object(o.createPortal)(Object(h.jsx)("div",{className:"Overlay",onClick:function(e){e.target===e.currentTarget&&t()},children:Object(h.jsx)("div",{className:"modal",children:Object(h.jsx)("img",{src:a.bigImg,alt:a.tags})})}),N)};var I=function(e){var t=e.onClick;return Object(h.jsx)("button",{onClick:t,className:"Button",children:"Load more"})},F="https://pixabay.com/api/",L="24468918-f1629215ca3337ba51b4044a7";var E=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),r=Object(i.a)(o,2),l=r[0],b=r[1],m=Object(n.useState)("nature"),j=Object(i.a)(m,2),f=j[0],d=j[1],O=Object(n.useState)(!1),p=Object(i.a)(O,2),v=p[0],S=p[1],y=Object(n.useState)(!1),w=Object(i.a)(y,2),N=w[0],E=w[1],U=Object(n.useState)(1),R=Object(i.a)(U,2),M=R[0],_=R[1],q=Object(n.useState)(!1),G=Object(i.a)(q,2),P=G[0],A=G[1];Object(n.useEffect)((function(){var e=function(e,t){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="".concat(F,"?q=").concat(e,"&key=").concat(L,"&page=").concat(t,"&image_type=photo&orientation=horizontal&per_page=12");return fetch(a).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something went wrong"))}))})(e,t).then((function(a){var n=a.totalHits,o=a.hits,r=Math.ceil(n/12),i=o.map((function(e){return{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}));if(n<1&&u.b.info("Sorry, no picture about ".concat(e),{autoClose:2500}),n>0&&1===t&&u.b.success("Found picture about ".concat(e||"everithing"),{autoClose:2500}),c((function(e){return[].concat(Object(s.a)(e),Object(s.a)(i))})),r>1&&A(!0),r===t)return u.b.info("Dont have more picture about ".concat(e),{autoClose:2500,delay:1500}),A(!1),!1})).catch((function(e){return u.b.error(e.message,{autoClose:2500})})).finally((function(){return S(!1)}))},t=!0;if(t)return S(!0),e(f,M),void(t=!1);e(f,M)}),[M,f]);return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(x,{onSubmit:function(e){return f===e?(u.b.warn("You look picture  about ".concat(f||"everything"," now ;) Search something else!"),{autoClose:3e3}),!1):function(e){d(e),_(1),c([]),A(!1),S(!0)}(e)}}),v&&Object(h.jsx)(g,{}),a.length>0&&Object(h.jsx)(C,{pictures:a,onClickImage:function(e,t){b({bigImg:e,tags:t}),E(!0)}}),N&&Object(h.jsx)(k,{data:l,onCloseModal:function(){E(!1),b(null)}}),P&&Object(h.jsx)(I,{onClick:function(){u.b.info("Uploading more pictures about ".concat(f||"everything ","  \u2665"),{autoClose:1500}),_((function(e){return e+1})),S(!0)}}),Object(h.jsx)(u.a,{})]})};a(44);r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(E,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.852d8417.chunk.js.map